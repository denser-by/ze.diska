package mydev.about; import java.awt.Color; import java.awt.Component; import java.awt.Font; import java.awt.Graphics; import java.awt.Image; import java.awt.image.DirectColorModel; import java.awt.image.ImageObserver; import java.awt.image.MemoryImageSource; public class Canvas implements ImageObserver { protected Graphics ics; protected Bitmap bitmap; public Canvas(Graphics ics) { super(); this.ics=ics;} public Canvas(Bitmap bitmap) { super(); this.bitmap=bitmap;} public void drawPoint(int x,int y,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawLine(x,y,x,y);}} public void drawPoint(int x,int y,int z,Paint pn) {} public void drawLine(int x,int y,int x2,int y2,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawLine(x,y,x2,y2);}} public void drawLine(int x,int y,int z,int x2,int y2,int z2,Paint pn) {} public void drawBitmap(int[] colors,int colorsWidth,int colorsHeight,int x,int y,int width,int height,Component comp,Paint pn) { if(ics !=null && comp !=null) { int bits=32; int redMask=16711680; int greenMask=65280; int blueMask=255; DirectColorModel dcm=new DirectColorModel(bits,redMask,greenMask,blueMask); int shift=0; int online=colorsWidth; Image img=comp.createImage(new MemoryImageSource(colorsWidth,colorsHeight,dcm,colors,shift,online)); ics.drawImage(img,x,y,width,height,this);}} public void drawBitmap(int[] colors,int colorsWidth,int colorsHeight,int x,int y,int width,int height,Paint pn) { drawBitmap(colors,colorsWidth,colorsHeight,x,y,width,height,pn.comp,pn);} public void drawImage(Image img,int x,int y,int width,int height) { drawImage(img,x,y,width,height,this);} public void drawImage(Image img,int x,int y,int width,int height,ImageObserver observ) { if(ics !=null) ics.drawImage(img,x,y,width,height,observ);} public boolean imageUpdate(Image img,int infoflags,int x,int y,int width,int height) { System.out.println("imageUpdate x="+x+" y="+y+" width="+width+" height="+height+" infoflags="+infoflags+" img="+img); return false;} public void drawText(String str,int x,int y,Paint pn) { drawText(str,x,y,pn,null);} public void drawText(String str,int x,int y,Paint pn,Font fn) { if(ics==null) ics=pn.cs1; if(ics !=null) { ics.setColor(new Color(pn.color)); Font prevFont=null; if(fn !=null) { prevFont=ics.getFont(); ics.setFont(fn);} int textHeight=ics.getFontMetrics().getHeight(); ics.drawString(str,x,y+textHeight / 2); if(prevFont !=null) ics.setFont(prevFont);}} public void fillElypsis(int x,int y,int width,int height,int angleStart,int angleDt,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.fillArc(x,y,width,height,angleStart,angleDt);}} public void drawElypsis(int x,int y,int width,int height,int angleStart,int angleDt,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawArc(x,y,width,height,angleStart,angleDt);}} public void drawSector(int x,int y,int r,int angleStart,int angleFinish,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawArc(x-r,y-r,2 * r,2 * r,angleStart,angleFinish);}} public void fillSector(int x,int y,int r,int angleStart,int angleFinish,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.fillArc(x-r,y-r,2 * r,2 * r,angleStart,angleFinish);}} public void drawCircle(int x,int y,int r,Paint pn) { drawSector(x,y,r,0,360,pn);} public void fillCircle(int x,int y,int r,Paint pn) { fillSector(x,y,r,0,360,pn);} public void fillCube(int x,int y,int z,int r,float angleX,float angleY,Paint pn) {} public void drawRect(int x,int y,int width,int height,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawRect(x,y,width-1,height-1);}} public void fillRect(int x,int y,int width,int height,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.fillRect(x,y,width-1,height-1);}} public void drawSquare(int x,int y,int r,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.drawRect(x-r,y-r,2 * r,2 * r);}} public void fillSquare(int x,int y,int r,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.fillRect(x-r,y-r,2 * r,2 * r);}} public void drawTriangle(int x,int y,int x2,int y2,int x3,int y3,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); int[] xx=new int[1+1+1]; xx[0]=x; xx[0+1]=x2; xx[0+1+1]=x3; int[] yy=new int[1+1+1]; yy[0]=y; yy[0+1]=y2; yy[0+1+1]=y3; ics.drawPolygon(xx,yy,1+1+1);}} public void fillTriangle(int x,int y,int x2,int y2,int x3,int y3,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); int[] xx=new int[1+1+1]; xx[0]=x; xx[0+1]=x2; xx[0+1+1]=x3; int[] yy=new int[1+1+1]; yy[0]=y; yy[0+1]=y2; yy[0+1+1]=y3; ics.fillPolygon(xx,yy,1+1+1);}} public void drawSphere(int x,int y,int z,int r,Paint pn) {} public void fillSphere(int x,int y,int z,int r,Paint pn) {} public void drawTriangle(int x,int y,int z,int x2,int y2,int z2,int x3,int y3,int z3,Paint pn) {} public void fillTriangle(int x,int y,int z,int x2,int y2,int z2,int x3,int y3,int z3,Paint pn) {} public void drawCircle3D(Point3D center,int r,Plane3D plane,Paint pn) {} public void fillCircle3D(Point3D center,int r,Plane3D plane,Paint pn) {} public void fillConture(int[] xx,int[] yy,Paint pn) { if(ics !=null) { ics.setColor(new Color(pn.color)); ics.fillPolygon(xx,yy,xx.length);}} public void drawPicture(int xStart,int yStart,Picture picture,Paint pn) { Color transColor=pn.getColorTransparent(); Color prevColor=Picture.FON_COLOR; for(int i=0; i < picture.fhx; i++) for(int j=0; j < picture.fwx; j++) { Color curColor=picture.pvx[i * picture.fwx+j]; if(curColor==null) continue; if(transColor !=null && transColor==curColor) continue; if(curColor !=prevColor) pn.setColor(curColor.getRGB()); drawPoint(xStart+j,yStart+i,pn); prevColor=curColor;}} public int drawTextWidth(String text) { if(ics !=null) return ics.getFontMetrics().stringWidth(text); return 0;} public int drawTextHeight(String text) { if(ics !=null) return ics.getFontMetrics().getHeight(); return 0;} public void fillConture(int[] xx,int[] yy,int[] zz,Paint pn) {}}