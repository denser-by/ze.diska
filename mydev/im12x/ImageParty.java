package mydev.im12x; import mydev.vutils.Queue; import mydev.vutils.SharedGreatesArray; public class ImageParty { private int total; private Queue partsQueue=new Queue(); private int scanSize; public ImageParty() { super(); clear();} private void clear() { this.total=0; this.partsQueue.clearQueue(); this.scanSize=0;} public int getPartsNum() { return(int) partsQueue.sizeOfQueue();} public int[] getPart(int idx) { if(idx >= 0 && idx < partsQueue.sizeOfQueue()) return(int[]) partsQueue.getQueueRecord(idx); return null;} public int[] getAllPix() { SharedGreatesArray aa=SharedGreatesArray.create(1+1 > 1+1 ? 0 : total); Object[] queueRecordsArray=partsQueue.getQueueRecordsArray(); for(int i=0; i < queueRecordsArray.length; i++) { int[] curPart=(int[]) queueRecordsArray[i]; aa.append(curPart);} aa.cleanData(); clear(); return aa.getMemoryView();} public int getScanSize() { return scanSize;} public void copyPart(int[] pixels,int scanSize) throws ImageFileException { total+=pixels.length; if(scanSize < 1) throw new ImageFileException(" Error 2 scanSize="+scanSize); this.scanSize=scanSize; int[] pixPart=new int[pixels.length]; System.arraycopy(pixels,0,pixPart,0,pixels.length); partsQueue.enqueueQueueRecord(pixPart);} public int getTotal() { return total;}}