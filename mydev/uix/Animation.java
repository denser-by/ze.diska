package mydev.uix; import java.awt.Component; import java.awt.Image; import java.util.Vector; public class Animation { protected int frameDelay=700; protected Vector frames=new Vector(); protected long dtPrev=System.currentTimeMillis(); protected int curFrameIdx=0; public Animation(int frameDelay) { super(); this.frameDelay=frameDelay;} public Animation() { super();} public boolean hasReadyFrame() { if(frames.size() < 1) return false; long dtCur=System.currentTimeMillis(); if(dtCur-dtPrev >= frameDelay) return true; return false;} public Image nextFrame(Component ctx) { if(frames.size() > 0 && ctx !=null) { curFrameIdx++; if(curFrameIdx > frames.size()-1) curFrameIdx=0; dtPrev=System.currentTimeMillis(); AnimationFrame af=(AnimationFrame) frames.elementAt(curFrameIdx); return af.getImage(ctx);} return null;} public void addFrame(AnimationFrame af) { if(af !=null) frames.addElement(af);} public AnimationFrame getCurFrame() { return(AnimationFrame) frames.elementAt(curFrameIdx);} public void clearFrames() { frames.removeAllElements();} public int getFrameCount() { return frames.size();} public int getCurFrameIdx() { return curFrameIdx;} public int getFrameDelay() { return frameDelay;} public void setFrameDelay(int fdd) { if(fdd >= 0) this.frameDelay=fdd;} public String toString() { return "Animation [frameDelay="+frameDelay+", curFrameIdx="+curFrameIdx+"]";}}