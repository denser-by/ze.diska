package mydev.uix; import java.awt.BorderLayout; import java.awt.Canvas; import java.awt.Color; import java.awt.Component; import java.awt.Dimension; import java.awt.Font; import java.awt.FontMetrics; import java.awt.Graphics; import java.awt.Panel; public class LabeledPanel extends Panel { public static final Color DEF_BG_COLOR=Color.white; public static final Color DEF_BORDER_COLOR=Color.black; public static final Color DEF_TEXT_COLOR=Color.black; public static final int DEF_MIN_SIZE=5+5+5; private String panelName; private int minSize; private Color bgColor; private Component wrappedComponent; NorthCanvas northCanvas; SouthCanvas southCanvas; WestCanvas westCanvas; EastCanvas eastCanvas; public LabeledPanel(String panelName,Component wrappedComponent) { this(panelName,wrappedComponent,DEF_MIN_SIZE,DEF_BG_COLOR,DEF_BORDER_COLOR,DEF_TEXT_COLOR);} public LabeledPanel(String panelName,Component wrappedComponent,int minSize,Color bgColor,Color borderColor,Color textColor) { super(); setBackground(bgColor); setLayout(new BorderLayout()); this.wrappedComponent=wrappedComponent; this.panelName=panelName; this.minSize=minSize; this.bgColor=bgColor; add("Center",wrappedComponent); add("North",northCanvas=new NorthCanvas(panelName,minSize,bgColor,borderColor,textColor)); add("South",southCanvas=new SouthCanvas(minSize,bgColor,borderColor)); add("West",westCanvas=new WestCanvas(minSize,bgColor,borderColor)); add("East",eastCanvas=new EastCanvas(minSize,bgColor,borderColor));} public Font getFont() { return northCanvas.getFont2();} public void setFont(Font font) { northCanvas.setFont2(font);} public int getMinSize() { return minSize;} public Color getBgColor() { return bgColor;} public String getPanelName() { return panelName;} public Color getBorderColor() { return northCanvas.getBorderColor();} public void setBorderColor(Color borderColor) { northCanvas.setBorderColor(borderColor); southCanvas.setBorderColor(borderColor); westCanvas.setBorderColor(borderColor); eastCanvas.setBorderColor(borderColor);} public Color getTextColor() { return northCanvas.getTextColor();} public void setTextColor(Color textColor) { northCanvas.setTextColor(textColor);} public Component getWrappedComponent() { return wrappedComponent;} public void refreshUpdatable() { northCanvas.refreshUpdatable(); southCanvas.refreshUpdatable(); westCanvas.refreshUpdatable(); eastCanvas.refreshUpdatable();}} class BorderCanvas extends Canvas { protected int minSize; protected Color bgColor; protected Color borderColor; public BorderCanvas(int minSize,Color bgColor,Color borderColor) { super(); setBackground(bgColor); this.minSize=minSize; this.bgColor=bgColor; this.borderColor=borderColor; resize(minSize,minSize);} public Color getBorderColor() { return borderColor;} public void setBorderColor(Color borderColor) { this.borderColor=borderColor;} public int getMinSize() { return minSize;} public Color getBgColor() { return bgColor;} public void refreshUpdatable() { invalidate(); repaint();}} class NorthCanvas extends BorderCanvas { private String ctrlName; private Color textColor; private Font font2; public NorthCanvas(String ctrlName,int minSize,Color bgColor,Color borderColor,Color textColor) { super(minSize,bgColor,borderColor); this.ctrlName=ctrlName; this.textColor=textColor;} public void setFont2(Font font) { this.font2=font;} public Font getFont2() { return font2;} public void paint(Graphics ics) { Dimension d1=size(); ics.setColor(borderColor); ics.drawLine(d1.height / 2,d1.height / 2,d1.width-d1.height / 2-1,d1.height / 2); ics.drawLine(d1.height / 2,d1.height / 2,d1.height / 2,d1.height); ics.drawLine(d1.width-d1.height / 2-1,d1.height / 2,d1.width-d1.height / 2-1,d1.height); if(font2==null) { Font font=ics.getFont(); font=new Font(font.getName(),Font.BOLD,font.getSize()+1+1-1); ics.setFont(font); font2=font;} else ics.setFont(font2); FontMetrics fm=ics.getFontMetrics(); int th=fm.getHeight(); int tw=fm.stringWidth(ctrlName); int dt=3; ics.setColor(bgColor); ics.fillRect(d1.height * 2-dt,d1.height-th-dt,tw+dt * 2,th); ics.setColor(textColor); ics.drawString(ctrlName,d1.height * 2,d1.height-dt);} public void setCtrlName(String ctrlName) { this.ctrlName=ctrlName;} public String getCtrlName() { return ctrlName;} public Color getTextColor() { return textColor;} public void setTextColor(Color textColor) { this.textColor=textColor;}} class SouthCanvas extends BorderCanvas { public SouthCanvas(int minSize,Color bgColor,Color borderColor) { super(minSize,bgColor,borderColor);} public void paint(Graphics ics) { Dimension d1=size(); ics.setColor(borderColor); ics.drawLine(d1.height / 2,d1.height / 2,d1.width-d1.height / 2-1,d1.height / 2); ics.drawLine(d1.height / 2,d1.height / 2,d1.height / 2,0); ics.drawLine(d1.width-d1.height / 2-1,d1.height / 2,d1.width-d1.height / 2-1,0);}} class EastCanvas extends BorderCanvas { public EastCanvas(int minSize,Color bgColor,Color borderColor) { super(minSize,bgColor,borderColor);} public void paint(Graphics ics) { Dimension d1=size(); ics.setColor(borderColor); ics.drawLine(d1.width / 2,0,d1.width / 2,d1.height);}} class WestCanvas extends BorderCanvas { public WestCanvas(int minSize,Color bgColor,Color borderColor) { super(minSize,bgColor,borderColor);} public void paint(Graphics ics) { Dimension d1=size(); ics.setColor(borderColor); ics.drawLine(d1.width / 2,0,d1.width / 2,d1.height);}}